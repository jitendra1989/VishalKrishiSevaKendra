.row
	.col-md-12
		%h2 Active Cart
	.col-md-10.col-md-offset-1
		.main-content
			%br
			.row
				.col-md-4 Product
				.col-md-3 Quantity
				.col-md-2.text-right Price
				.col-md-2.text-right Amount
				.col-md-1
			- subtotal = 0
			- @cart.items.includes(:product).each do |item|
				.row
					.col-md-2
						= image_tag item.product.images.first.name.thumbnail
					.col-md-2
						= item.product.name
					.col-md-3
						= form_tag front_cart_path, class: 'form-inline', method: :patch do
							= hidden_field_tag :product_id, item.product.id
							= number_field_tag :quantity, item.quantity, min: 0, max: item.product.online_stock, class: 'cart-quantity form-control', 'data-price' => item.product.price_with_taxes
							= button_tag 'Update',  class: 'btn btn-default'
					.col-md-2.text-right= number_to_currency item.product.price_with_taxes
					.col-md-2.text-right
						- amount = item.product.price_with_taxes * item.quantity
						- subtotal += amount
						= number_to_currency amount
					.col-md-1.actions.text-center
						= link_to remove_front_cart_path(item.product_id), method: :delete, class: 'delete-link', 'data-confirm' => 'Are you sure?' do
							%span.glyphicon.glyphicon-remove
			%hr
			.row.text-right
				.col-md-offset-7.col-md-2 Subtotal
				.col-md-2.subtotal{ 'data-subtotal' => subtotal }= number_to_currency subtotal
				.col-md-1
			%hr
